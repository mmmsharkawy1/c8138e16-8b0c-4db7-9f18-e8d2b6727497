# Task: Modular Wholesale SaaS Platform

- [x] Phase 1: Domain Modeling
    - [x] Define Bounded Contexts
    - [x] Identify Core Entities
    - [x] Define Responsibilities & Boundaries
    - [x] Finalize Core vs Module separation
- [x] Phase 2: Core Database Schema Design
    - [x] Design SQL Schema for Core Domains
    - [x] Ensure Multi-tenancy & Auditability
    - [x] User Review & Approval
- [x] Phase 3: Row Level Security (RLS) & Access Control
    - [x] Design RLS Policies for Tenant Isolation
    - [x] Define RBAC Logic (Owner, Manager, Cashier, Accountant)
    - [x] User Review & Approval
- [x] Phase 4: Core Database Functions & Transaction Layer
    - [x] Design Inventory Functions (adjust_stock, reserve_stock, release_stock)
    - [x] Design Sales & Financial Functions (create_order, cancel_order, log_payment)
    - [x] Implement Automated Event Emission Logic
    - [x] Add Tenant Validation (Security Enhancement)
    - [x] Schema Optimization (unit_id in reservations, JWT-cached roles)
    - [x] User Review & Approval
- [x] Phase 5: Monorepo & Core Infrastructure Setup
    - [x] Initialize Turborepo structure (Apps: dashboard, pos; Packages: shared, database)
    - [x] Setup Supabase Project & Apply Schema (including SaaS governance + Niche Templates + Bundles)
    - [ ] Seed Niche Templates (Clothing, Auto Parts, FMCG) [In Progress - Tables Ready]
    - [ ] Configure PowerSync for offline-first sync
    - [x] Build Electron wrapper base for POS integration
    - [x] Build Core Packages (Database Client, Shared Types)
    - [x] Git Initialization & GitHub Push
- [ ] Phase 6: Frontend & Domain Implementation
    - [ ] Implement Supabase Auth with MFA
    - [ ] Implement Onboarding Wizard (Niche Selection, Branding/Theme)
    - [ ] Implement Bundle Sales Logic
    - [ ] Implement SaaS Governance (Subscriptions, Limits, Feature Flags)
    - [ ] Create Event Bus for real-time updates
- [ ] Phase 7: Verification & Testing
    - [ ] Write Unit Tests for Core Functions
    - [ ] Verify RLS Tenant Isolation & Subscription Limits
    - [ ] Test Multi-unit conversion
- [ ] Phase 8: AI & Automation (Future)
    - [ ] AI Merchant Assistant
    - [ ] Customer Support Chatbot

